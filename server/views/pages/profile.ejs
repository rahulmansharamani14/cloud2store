<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="../../public/stylesheets/style.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <title>Profile</title>

    </head>
    <body>
        <div class="container-fluid">

       
            <h1>File Versioning App</h1>

            <br />

            <h2>Upload Files</h2>
            <br />

            <form id="upload-form" enctype="multipart/form-data">
                <h2>Select an file to upload:</h2>
                <div class="upload-container"><input id="file-picker" name="file-picker" type="file" name="image" /></div>
                <br />
                <div><input type="submit" value="Upload Image" /></div>
            </form>





            <div>
                <table class="table table-striped">
                <thead>
                    <tr>
                    <th scope="col">File Name</th>
                    <th scope="col">Version</th>
                    <th scope="col">Download</th>
                    <th scope="col">Delete</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                    <th scope="row">1</th>
                    <td>Mark</td>
                    <td><button type="button" class="btn btn-primary">Download</button></td>
                    <td><button type="button" class="btn btn-danger">Danger</button></td>
                    </tr>
                    <tr>
                    <th scope="row">2</th>
                    <td>Jacob</td>
                    <td><button type="button" class="btn btn-primary">Download</button></td>
                    <td><button type="button" class="btn btn-danger">Danger</button></td>
                    </tr>
                    <tr>
                    <th scope="row">2</th>
                    <td>Jacob</td>
                    <td><button type="button" class="btn btn-primary">Download</button></td>
                    <td><button type="button" class="btn btn-danger">Danger</button></td>
                    </tr>
                </tbody>
                </table>
            </div>
        </div>



        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.24.0/axios.min.js"
            integrity="sha512-u9akINsQsAkG9xjc1cnGF4zw5TFDwkxuc9vUp5dltDWYCSmyd0meygbvgXrlc/z7/o4a19Fb5V0OUE58J7dcyw=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                function handleForm() {
                    const form = document.getElementById("upload-form");

                    form.addEventListener("submit", async (e) => {
                        e.preventDefault();

                        let photo = document.getElementById("file-picker").files[0];

                        console.log("photo: " + photo);

                        let formData = new FormData(form);
                        const obj = {};
                        const file = formData.get("file-picker");
                        obj.content = file;
                        obj.containerName = "thumbnails";

                        console.log("file: ", file);
                        console.log(obj);

                        axios.post("/api/file/upload", obj).then(function (response) {
                            console.log(response);
                        });
                    });
                }

                handleForm();

                const message = document.getElementById("message");
                const picker = document.getElementById("file-picker");

                document.getElementById("upload-form").addEventListener("submit", (e) => {
                    message.innerText = "";

                    if (!picker.files.length) {
                        message.innerText = "Please select an image to upload.";
                        e.preventDefault();
                        return false;
                    }
                });
            });
        </script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    </body>
</html>
